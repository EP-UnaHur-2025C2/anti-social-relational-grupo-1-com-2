---
swagger: "2.0"
info:
  title: API UnaHur Anti-Social Net - Grupo 1 Comisión 2
  description: Se encuentra inspirada en plataformas populares que permiten a los usuarios realizar publicaciones y recibir comentarios sobre las mismas.
  version: 1.0.0
host: localhost:3000
basePath: /
schemes:
  - http
tags:
  - name: User
    description: Operaciones sobre usuarios
  - name: Post
    description: Operaciones sobre publicaciones
  - name: Comment
    description: Operaciones sobre comentarios
  - name: Tag
    description: Operaciones sobre etiquetas
  - name: PostImage
    description: Operaciones sobre imágenes de publicaciones

paths:
  # ==================== USER ====================
  /user/:
    get:
      tags:
        - User
      summary: Obtener todos los usuarios
      description: Retorna la lista completa de usuarios registrados
      responses:
        "200":
          description: Lista de usuarios obtenida exitosamente
        "500":
          description: Error interno del servidor
    post:
      tags:
        - User
      summary: Crear un nuevo usuario
      description: Registra un nuevo usuario en el sistema
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - nickName
              - email
            properties:
              nickName:
                type: string
                example: "usuario123"
              email:
                type: string
                example: "usuario@example.com"
      responses:
        "201":
          description: Usuario creado exitosamente
        "500":
          description: Error interno del servidor

  /user/{id}:
    get:
      tags:
        - User
      summary: Obtener un usuario por ID
      description: Retorna la información de un usuario específico
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del usuario
      responses:
        "200":
          description: Usuario encontrado
        "404":
          description: Usuario no encontrado
        "500":
          description: Error interno del servidor
    put:
      tags:
        - User
      summary: Actualizar un usuario
      description: Modifica los datos de un usuario existente
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del usuario
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              nickName:
                type: string
                example: "nuevoNick"
              email:
                type: string
                example: "nuevo@example.com"
      responses:
        "201":
          description: Usuario actualizado exitosamente
        "404":
          description: Usuario no encontrado
        "500":
          description: Error interno del servidor
    delete:
      tags:
        - User
      summary: Eliminar un usuario
      description: Elimina un usuario del sistema
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del usuario
      responses:
        "200":
          description: Usuario eliminado exitosamente
        "404":
          description: Usuario no encontrado
        "500":
          description: Error interno del servidor

  /user/{id}/post:
    get:
      tags:
        - User
      summary: Obtener posts de un usuario
      description: Retorna todas las publicaciones de un usuario específico
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del usuario
      responses:
        "200":
          description: Posts obtenidos exitosamente
        "404":
          description: Usuario no encontrado
        "500":
          description: Error interno del servidor
    post:
      tags:
        - User
      summary: Crear un post para un usuario
      description: Crea una nueva publicación asociada a un usuario
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del usuario
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - texto
            properties:
              texto:
                type: string
                example: "Contenido de la publicación"
      responses:
        "201":
          description: Post creado exitosamente
        "404":
          description: Usuario no encontrado
        "500":
          description: Error interno del servidor

  /user/{id}/post/{postId}/comment:
    post:
      tags:
        - User
      summary: Comentar un post
      description: Crea un comentario en una publicación específica
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del usuario
        - name: postId
          in: path
          required: true
          type: string
          description: ID del post
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - texto
            properties:
              texto:
                type: string
                example: "Texto del comentario"
              esVisible:
                type: boolean
                example: true
      responses:
        "201":
          description: Comentario creado exitosamente
        "500":
          description: Error interno del servidor

  # ==================== POST ====================
  /post/:
    get:
      tags:
        - Post
      summary: Obtener todos los posts
      description: Retorna la lista completa de publicaciones
      responses:
        "200":
          description: Posts obtenidos exitosamente
        "500":
          description: Error interno del servidor

  /post/{id}:
    get:
      tags:
        - Post
      summary: Obtener un post por ID
      description: Retorna la información de una publicación específica
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del post
      responses:
        "200":
          description: Post encontrado
        "404":
          description: Post no encontrado
        "500":
          description: Error interno del servidor
    put:
      tags:
        - Post
      summary: Actualizar un post
      description: Modifica el contenido de una publicación
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del post
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - texto
            properties:
              texto:
                type: string
                example: "Texto actualizado del post"
      responses:
        "201":
          description: Post actualizado exitosamente
        "404":
          description: Post no encontrado
        "500":
          description: Error interno del servidor
    delete:
      tags:
        - Post
      summary: Eliminar un post
      description: Elimina una publicación del sistema
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del post
      responses:
        "200":
          description: Post eliminado exitosamente
        "404":
          description: Post no encontrado
        "500":
          description: Error interno del servidor

  /post/{id}/comment:
    get:
      tags:
        - Post
      summary: Obtener comentarios de un post
      description: Retorna todos los comentarios de una publicación
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del post
      responses:
        "200":
          description: Comentarios obtenidos exitosamente
        "404":
          description: Post no encontrado
        "500":
          description: Error interno del servidor

  /post/{id}/image:
    get:
      tags:
        - Post
      summary: Obtener imágenes de un post
      description: Retorna todas las imágenes asociadas a una publicación
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del post
      responses:
        "200":
          description: Imágenes obtenidas exitosamente
        "404":
          description: Post no encontrado
        "500":
          description: Error interno del servidor
    post:
      tags:
        - Post
      summary: Agregar imágenes a un post
      description: Asocia imágenes existentes a una publicación
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del post
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - imagenIds
            properties:
              imagenIds:
                type: array
                items:
                  type: string
                example: ["img1", "img2"]
      responses:
        "200":
          description: Imágenes agregadas exitosamente
        "500":
          description: Error interno del servidor
    delete:
      tags:
        - Post
      summary: Eliminar imágenes de un post
      description: Desasocia imágenes de una publicación
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del post
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - imagenIds
            properties:
              imagenIds:
                type: array
                items:
                  type: string
                example: ["img1", "img2"]
      responses:
        "200":
          description: Imágenes eliminadas exitosamente
        "500":
          description: Error interno del servidor

  /post/{id}/tag:
    get:
      tags:
        - Post
      summary: Obtener tags de un post
      description: Retorna todas las etiquetas asociadas a una publicación
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del post
      responses:
        "200":
          description: Tags obtenidos exitosamente
        "404":
          description: Post no encontrado
        "500":
          description: Error interno del servidor
    post:
      tags:
        - Post
      summary: Agregar tags a un post
      description: Asocia etiquetas existentes a una publicación
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del post
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - tagIds
            properties:
              tagIds:
                type: array
                items:
                  type: string
                example: ["tag1", "tag2"]
      responses:
        "200":
          description: Tags agregados exitosamente
        "500":
          description: Error interno del servidor

  # ==================== POST IMAGE ====================
  /post_image/:
    get:
      tags:
        - PostImage
      summary: Obtener todas las imágenes
      description: Retorna la lista completa de imágenes disponibles
      responses:
        "200":
          description: Imágenes obtenidas exitosamente
        "500":
          description: Error interno del servidor
    post:
      tags:
        - PostImage
      summary: Crear una nueva imagen
      description: Registra una nueva imagen en el sistema
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - url
            properties:
              url:
                type: string
                example: "https://example.com/imagen.jpg"
      responses:
        "201":
          description: Imagen creada exitosamente
        "500":
          description: Error interno del servidor

  /post_image/{id}:
    get:
      tags:
        - PostImage
      summary: Obtener una imagen por ID
      description: Retorna la información de una imagen específica
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID de la imagen
      responses:
        "200":
          description: Imagen encontrada
        "404":
          description: Imagen no encontrada
        "500":
          description: Error interno del servidor
    put:
      tags:
        - PostImage
      summary: Actualizar una imagen
      description: Modifica la URL de una imagen existente
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID de la imagen
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - url
            properties:
              url:
                type: string
                example: "https://example.com/nueva-imagen.jpg"
      responses:
        "200":
          description: Imagen actualizada exitosamente
        "404":
          description: Imagen no encontrada
        "500":
          description: Error interno del servidor
    delete:
      tags:
        - PostImage
      summary: Eliminar una imagen
      description: Elimina una imagen del sistema
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID de la imagen
      responses:
        "200":
          description: Imagen eliminada exitosamente
        "404":
          description: Imagen no encontrada
        "500":
          description: Error interno del servidor

  # ==================== COMMENT ====================
  /comment/:
    get:
      tags:
        - Comment
      summary: Obtener todos los comentarios
      description: Retorna la lista completa de comentarios
      responses:
        "200":
          description: Comentarios obtenidos exitosamente
        "500":
          description: Error interno del servidor
    post:
      tags:
        - Comment
      summary: Crear un nuevo comentario
      description: Registra un nuevo comentario en el sistema
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - texto
            properties:
              texto:
                type: string
                example: "Texto del comentario"
              esVisible:
                type: boolean
                example: true
      responses:
        "201":
          description: Comentario creado exitosamente
        "500":
          description: Error interno del servidor

  /comment/{id}:
    get:
      tags:
        - Comment
      summary: Obtener un comentario por ID
      description: Retorna la información de un comentario específico
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del comentario
      responses:
        "200":
          description: Comentario encontrado
        "404":
          description: Comentario no encontrado
        "500":
          description: Error interno del servidor
    put:
      tags:
        - Comment
      summary: Actualizar un comentario
      description: Modifica el contenido de un comentario existente
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del comentario
        - name: body
          in: body
          required: true
          schema:
            type: object
            properties:
              texto:
                type: string
                example: "Texto actualizado"
              fecha:
                type: string
                format: date-time
                example: "2024-01-20T10:30:00Z"
              esVisible:
                type: boolean
                example: false
      responses:
        "200":
          description: Comentario actualizado exitosamente
        "404":
          description: Comentario no encontrado
        "500":
          description: Error interno del servidor
    delete:
      tags:
        - Comment
      summary: Eliminar un comentario
      description: Elimina un comentario del sistema
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del comentario
      responses:
        "200":
          description: Comentario eliminado exitosamente
        "404":
          description: Comentario no encontrado
        "500":
          description: Error interno del servidor

  # ==================== TAG ====================
  /tag/:
    get:
      tags:
        - Tag
      summary: Obtener todos los tags
      description: Retorna la lista completa de etiquetas
      responses:
        "200":
          description: Tags obtenidos exitosamente
        "500":
          description: Error interno del servidor
    post:
      tags:
        - Tag
      summary: Crear un nuevo tag
      description: Registra una nueva etiqueta en el sistema
      parameters:
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - texto
            properties:
              texto:
                type: string
                example: "programacion"
      responses:
        "201":
          description: Tag creado exitosamente
        "500":
          description: Error interno del servidor

  /tag/{id}:
    get:
      tags:
        - Tag
      summary: Obtener un tag por ID
      description: Retorna la información de una etiqueta específica
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del tag
      responses:
        "200":
          description: Tag encontrado
        "404":
          description: Tag no encontrado
        "500":
          description: Error interno del servidor
    put:
      tags:
        - Tag
      summary: Actualizar un tag
      description: Modifica el texto de una etiqueta existente
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del tag
        - name: body
          in: body
          required: true
          schema:
            type: object
            required:
              - texto
            properties:
              texto:
                type: string
                example: "desarrollo-web"
      responses:
        "200":
          description: Tag actualizado exitosamente
        "404":
          description: Tag no encontrado
        "500":
          description: Error interno del servidor
    delete:
      tags:
        - Tag
      summary: Eliminar un tag
      description: Elimina una etiqueta del sistema
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del tag
      responses:
        "200":
          description: Tag eliminado exitosamente
        "404":
          description: Tag no encontrado
        "500":
          description: Error interno del servidor

  /tag/{id}/posts:
    get:
      tags:
        - Tag
      summary: Obtener posts por tag
      description: Retorna todas las publicaciones asociadas a una etiqueta
      parameters:
        - name: id
          in: path
          required: true
          type: string
          description: ID del tag
      responses:
        "200":
          description: Posts obtenidos exitosamente
        "404":
          description: Tag no encontrado
        "500":
          description: Error interno del servidor